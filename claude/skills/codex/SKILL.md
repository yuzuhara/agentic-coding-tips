---
name: codex
description: |
  Codex CLI（OpenAI）を使用してコードや文言について相談・レビューを行う。
  「codex」「codexと相談」「codexに聞いて」「codexにレビュー」「セカンドオピニオン」「別の意見」「別の視点」などのフレーズが出たときに使用する。
  使用場面: (1) 文言・メッセージの検討、(2) コードレビュー、(3) 設計の相談、(4) バグ調査、(5) 解消困難な問題の調査、(6) 別のAIからのセカンドオピニオンが欲しいとき。
  コードレビューや設計相談の文脈で「別の意見が欲しい」「他のAIにも聞いてみて」と言われた場合もこのスキルを使用すること。
---

# Codex CLI 呼び出しスキル

Claude Codeの作業中に、Codex CLI（OpenAI）を呼び出してセカンドオピニオンや分析を得るためのスキル。

## 実行コマンド

```
codex exec --full-auto --sandbox read-only --cd <project_directory> "<request>"
```

## プロンプトのルール

Codexに渡すリクエストには、以下の指示を末尾に必ず含めること:

> 「確認や質問は不要です。具体的な提案・修正案・コード例まで自主的に出力してください。」

## パラメータ

| パラメータ | 説明 |
|-----------|------|
| `--full-auto` | 完全自動モードで実行 |
| `--sandbox read-only` | 読み取り専用サンドボックス（安全な分析用） |
| `--cd <dir>` | 対象プロジェクトのディレクトリ |
| `"<request>"` | 依頼内容（日本語可） |

## 実行手順

1. ユーザーから依頼内容を受け取る
2. 対象プロジェクトのディレクトリを特定する（現在のワーキングディレクトリまたはユーザー指定）
3. プロンプトを作成する際、末尾に「確認や質問は不要です。具体的な提案まで自主的に出力してください。」を必ず追加する
4. Bashツールで `codex exec` コマンドを実行する（タイムアウトは長めに設定: 300000ms）
5. Codexの出力結果をユーザーに報告する
6. 必要に応じてCodexの提案を現在の作業に統合する

## 使用例

### コードレビュー
```bash
codex exec --full-auto --sandbox read-only --cd /path/to/project "このプロジェクトのコードをレビューして、改善点を指摘してください。確認や質問は不要です。具体的な修正案とコード例まで自主的に出力してください。"
```

### バグ調査
```bash
codex exec --full-auto --sandbox read-only --cd /path/to/project "認証処理でエラーが発生する原因を調査してください。確認や質問は不要です。原因の特定と具体的な修正案まで自主的に出力してください。"
```

### アーキテクチャ分析
```bash
codex exec --full-auto --sandbox read-only --cd /path/to/project "このプロジェクトのアーキテクチャを分析して説明してください。確認や質問は不要です。改善提案まで自主的に出力してください。"
```

### リファクタリング提案
```bash
codex exec --full-auto --sandbox read-only --cd /path/to/project "技術的負債を特定し、リファクタリング計画を提案してください。確認や質問は不要です。具体的なコード例まで自主的に出力してください。"
```

### 文言・メッセージの検討
```bash
codex exec --full-auto --sandbox read-only --cd /path/to/project "エラーメッセージやUIテキストの文言を確認し、ユーザビリティの観点から改善案を提示してください。確認や質問は不要です。具体的な代替文言まで自主的に出力してください。"
```

### デザイン相談（UI/UX）
```bash
codex exec --full-auto --sandbox read-only --cd /path/to/project "あなたは世界トップクラスのUIデザイナーです。以下の観点からこのプロジェクトのUIを評価してください: (1) 視覚的階層構造とタイポグラフィ、(2) 余白・スペーシングのリズム、(3) カラーパレットのコントラストとアクセシビリティ、(4) インタラクションパターンの一貫性、(5) ユーザーの認知負荷の軽減。確認や質問は不要です。具体的な改善案をコード例付きで提示してください。"
```

## 注意事項

- Codexは読み取り専用モードで実行されるため、ファイルの変更は行わない
- Codexの出力はあくまでセカンドオピニオンとして扱い、最終判断はユーザーに委ねる
- 大規模プロジェクトの場合、実行に時間がかかることがある（タイムアウト: 5分）
